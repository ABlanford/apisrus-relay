id: feedview-relay
title: FeedView Relay
version: 0.1.0
release-notes: |
  Initial release - Convert RTSP camera streams to HLS for FeedView marketplace
license: MIT
wrapper-repo: https://github.com/apisrus/feedview-relay-startos
upstream-repo: https://github.com/bluenviron/mediamtx
support-site: https://apisrus.com/support
marketing-site: https://apisrus.com
donation-url: null
build: ["make"]

description:
  short: Convert RTSP cameras to Lightning-payable HLS streams
  long: |
    FeedView Relay transforms your local security cameras (Lorex, Hikvision, Dahua, etc.) 
    into web-accessible HLS streams that can be sold on the FeedView marketplace for 
    Lightning micropayments.
    
    Simply enter your camera's RTSP URL and FeedView Relay handles the conversion.
    Share the resulting HLS URL on FeedView to earn sats from viewers.
    
    Perfect for:
    - Traffic cameras
    - Weather stations  
    - Nature cams
    - Security feeds (private access)
    - Any IP camera with RTSP support

assets:
  license: LICENSE.md
  icon: icon.png
  instructions: instructions.md

main:
  type: docker
  image: main
  entrypoint: /docker_entrypoint.sh
  args: []
  mounts:
    main: /data
  gpu-acceleration: false

hardware-requirements:
  arch:
    - x86_64
    - aarch64

health-checks:
  main:
    name: MediaMTX Server
    success-message: Relay is running and ready to stream
    type: docker
    image: main
    entrypoint: /bin/sh
    args:
      - -c
      - "wget -q --spider http://localhost:8888/healthcheck || exit 1"
    inject: true
    io-format: yaml
    timeout: 30s

config: ~
properties: ~

volumes:
  main:
    type: data

interfaces:
  main:
    name: HLS Stream Output
    description: Access your camera streams in HLS format
    tor-config:
      port-mapping:
        8888: "8888"
    lan-config:
      443:
        ssl: true
        internal: 8888
    ui: false
    protocols:
      - tcp
      - http

dependencies: {}

backup:
  create:
    type: docker
    image: main
    entrypoint: /bin/sh
    args:
      - -c
      - |
        cp /data/config.yaml /backup/config.yaml 2>/dev/null || true
    io-format: yaml

  restore:
    type: docker
    image: main
    entrypoint: /bin/sh
    args:
      - -c
      - |
        cp /backup/config.yaml /data/config.yaml 2>/dev/null || true
    io-format: yaml

migrations:
  from:
    "*":
      type: script
      args: ["from"]
  to:
    "*":
      type: script
      args: ["to"]

actions:
  restart-streams:
    name: Restart All Streams
    description: Restart the MediaMTX server to reload camera connections
    warning: This will briefly interrupt all active streams
    allowed-statuses:
      - running
    implementation:
      type: docker
      image: main
      entrypoint: /bin/sh
      args:
        - -c
        - "killall mediamtx; sleep 2; /mediamtx &"
      io-format: yaml
      inject: true
